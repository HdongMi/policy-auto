<script>
  // 1. 주소창(URL)에서 파라미터 읽기
  const params = new URLSearchParams(window.location.search);
  
  // 2. 각 항목별로 데이터 가져오기 (decodeURIComponent는 브라우저가 자동으로 처리함)
  const title = params.get("title");
  const region = params.get("region");
  const deadline = params.get("deadline");
  const source = params.get("source");
  const link = params.get("link"); 

  // 3. 화면에 데이터 뿌려주기
  if (title) {
      document.getElementById("detailTitle").innerText = title;
      document.getElementById("detailTarget").innerText = region || "전국";
      document.getElementById("detailDeadline").innerText = deadline || "상세참조";
      document.getElementById("detailSource").innerText = source || "상세참조";
      
      const linkBtn = document.getElementById("detailLink");

      // ★ 핵심: 링크 주소가 진짜 URL인지, 유효한지 꼼꼼히 체크
      if (link && link.startsWith('http')) {
          linkBtn.href = link;
          linkBtn.innerText = "공식 공고 페이지로 이동";
          linkBtn.style.background = "var(--lilac)";
          linkBtn.style.pointerEvents = "auto";
      } else {
          // 링크가 없거나 "undefined", "null" 등으로 들어올 경우
          linkBtn.innerText = "공고 링크를 준비 중입니다";
          linkBtn.style.background = "#bbb";
          linkBtn.style.pointerEvents = "none"; 
          linkBtn.href = "#";
      }
  } else {
      document.getElementById("detailTitle").innerText = "정보를 불러올 수 없습니다.";
  }
</script>
